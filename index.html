<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Flappy Bird with Menu & Settings</title>
<style>
  body {
    margin: 0;
    background: #87CEEB;
    font-family: Arial, sans-serif;
    user-select: none;
    overflow: hidden;
  }
  #container {
    width: 480px;
    margin: 20px auto;
    position: relative;
  }
  #mainMenu, #settingsMenu, #gameScreen {
    background: #87CEEB;
    border: 2px solid #000;
    border-radius: 8px;
    padding: 20px;
    box-sizing: border-box;
    width: 100%;
  }
  #mainMenu, #settingsMenu {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #settingsMenu {
    display: none;
  }
  button {
    background: #4CAF50;
    border: none;
    color: white;
    padding: 15px 30px;
    margin: 10px;
    font-size: 18px;
    border-radius: 8px;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #45a049;
  }
  #gameCanvas {
    display: block;
    background: #87CEEB;
    border-radius: 8px;
    border: 2px solid #000;
  }
  #backFromSettings {
    background: #f44336;
  }
</style>
</head>
<body>
  <div id="container">
    <!-- Main Menu -->
    <div id="mainMenu" role="menu" aria-label="Main menu">
      <h1>Flappy Bird</h1>
      <button id="startGameBtn" role="menuitem" aria-label="Start game">Start Game</button>
      <button id="settingsBtn" role="menuitem" aria-label="Open settings">Settings</button>
    </div>

    <!-- Settings Menu -->
    <div id="settingsMenu" role="dialog" aria-modal="true" aria-labelledby="settingsTitle" aria-describedby="settingsDesc">
      <h2 id="settingsTitle">Settings</h2>
      <p id="settingsDesc">Toggle sound and music.</p>
      <label>
        <input type="checkbox" id="toggleMusic" checked /> Music
      </label>
      <label>
        <input type="checkbox" id="toggleSound" checked /> Sound Effects
      </label>
      <button id="backFromSettings">Back</button>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" style="display:none;">
      <canvas id="gameCanvas" width="480" height="640" aria-label="Flappy Bird Game"></canvas>
    </div>
  </div>

<script>
(() => {
  // Elements
  const mainMenu = document.getElementById('mainMenu');
  const settingsMenu = document.getElementById('settingsMenu');
  const gameScreen = document.getElementById('gameScreen');

  const startGameBtn = document.getElementById('startGameBtn');
  const settingsBtn = document.getElementById('settingsBtn');
  const backFromSettings = document.getElementById('backFromSettings');
  const toggleMusic = document.getElementById('toggleMusic');
  const toggleSound = document.getElementById('toggleSound');

  // Settings state
  let musicOn = true;
  let soundOn = true;

  // Handle buttons
  startGameBtn.addEventListener('click', () => {
    mainMenu.style.display = 'none';
    settingsMenu.style.display = 'none';
    gameScreen.style.display = 'block';
    startGame();
  });

  settingsBtn.addEventListener('click', () => {
    mainMenu.style.display = 'none';
    settingsMenu.style.display = 'flex';
  });

  backFromSettings.addEventListener('click', () => {
    settingsMenu.style.display = 'none';
    mainMenu.style.display = 'flex';
  });

  toggleMusic.addEventListener('change', e => {
    musicOn = e.target.checked;
    console.log('Music toggled:', musicOn);
    // Add music toggle logic here if needed
  });

  toggleSound.addEventListener('change', e => {
    soundOn = e.target.checked;
    console.log('Sound effects toggled:', soundOn);
    // Add sound effects toggle logic here if needed
  });

  // Simple game start example
  function startGame() {
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let birdY = canvas.height / 2;
    let velocity = 0;
    const gravity = 0.5;
    const jump = -8;
    let isRunning = true;

    function flap() {
      if (!isRunning) return;
      velocity = jump;
      if (soundOn) {
        // Play flap sound here
        console.log('Flap sound!');
      }
    }

    // Click or spacebar to flap
    window.addEventListener('keydown', e => {
      if (e.code === 'Space') flap();
    });
    canvas.addEventListener('click', flap);

    function gameLoop() {
      if (!isRunning) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Update bird
      velocity += gravity;
      birdY += velocity;

      if (birdY + 24 > canvas.height) {
        birdY = canvas.height - 24;
        velocity = 0;
      }
      if (birdY < 0) {
        birdY = 0;
        velocity = 0;
      }

      // Draw bird
      ctx.fillStyle = 'yellow';
      ctx.fillRect(50, birdY, 34, 24);

      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  }
})();
</script>
</body>
</html>
